{"id":"95500d7a-db75-4efc-98df-0cced670c7c1","zed":"context","version":"0.4.0","text":"\n\n```json ~/.config/zed/settings.json\n// Zed settings\n//\n// For information on how to configure Zed, see the Zed\n// documentation: https://zed.dev/docs/configuring-zed\n//\n// To see all of Zed's default settings without changing your\n// custom settings, run `zed: open default settings` from the\n// command palette (cmd-shift-p / ctrl-shift-p)\n{\n    \"remove_trailing_whitespace_on_save\": true,\n    \"theme\": \"Catppuccin Frapp√©\",\n    \"ui_font_size\": 16,\n    \"ui_font_family\": \"Dank Mono\",\n    \"ui_font_features\": {\n        \"calt\": true\n    },\n    \"buffer_font_size\": 16,\n    \"buffer_line_height\": \"comfortable\",\n    \"buffer_font_family\": \"Dank Mono\",\n    \"buffer_font_fallbacks\": [\n        \"Dank Mono\"\n    ],\n    \"autosave\": \"on_focus_change\",\n    \"confirm_quit\": false,\n    \"base_keymap\": \"VSCode\",\n    \"load_direnv\": \"direct\",\n    \"current_line_highlight\": \"gutter\",\n    \"cursor_shape\": \"underscore\",\n    \"scrollbar\": {\n        \"show\": \"auto\",\n        \"cursors\": true,\n        \"git_diff\": true,\n        \"search_results\": true,\n        \"selected_symbol\": true,\n        \"diagnostics\": true\n    },\n    \"tab_bar\": {\n        \"show\": true,\n        \"show_nav_history_buttons\": false\n    },\n    \"tabs\": {\n        \"close_position\": \"right\",\n        \"file_icons\": true,\n        \"git_status\": true,\n        \"activate_on_close\": \"history\"\n    },\n    \"toolbar\": {\n        \"breadcrumbs\": true,\n        \"quick_actions\": false\n    },\n    \"enable_language_server\": true,\n    \"ensure_final_newline_on_save\": true,\n    \"format_on_save\": \"on\",\n    \"formatter\": \"language_server\",\n    \"use_autoclose\": true,\n    \"git\": {\n        \"git_gutter\": \"tracked_files\",\n        \"inline_blame\": {\n            \"enabled\": true\n        }\n    },\n    \"indent_guides\": {\n        \"enabled\": true,\n        \"line_width\": 1,\n        \"active_line_width\": 1,\n        \"coloring\": \"indent_aware\",\n        \"background_coloring\": \"disabled\"\n    },\n    \"hard_tabs\": false,\n    \"hour_format\": \"hour12\",\n    \"search\": {\n        \"whole_word\": false,\n        \"case_sensitive\": false,\n        \"include_ignored\": false,\n        \"regex\": false\n    },\n    \"show_inline_completions\": true,\n    \"show_completions_on_input\": true,\n    \"soft_wrap\": \"preferred_line_length\",\n    \"show_wrap_guides\": false,\n    \"preferred_line_length\": 120,\n    \"tab_size\": 4,\n    \"terminal\": {\n        \"shell\": {\n            \"program\": \"zsh\"\n        },\n        \"alternate_scroll\": \"off\",\n        \"blinking\": \"terminal_controlled\",\n        \"copy_on_select\": true,\n        \"dock\": \"bottom\",\n        \"detect_venv\": {\n            \"on\": {\n                \"directories\": [\n                    \".env\",\n                    \"env\",\n                    \".venv\",\n                    \"venv\"\n                ],\n                \"activate_script\": \"default\"\n            }\n        },\n        \"env\": {},\n        \"font_family\": \"JetBrainsMono Nerd Font Mono\",\n        \"font_features\": {},\n        \"font_size\": 15,\n        \"line_height\": \"comfortable\",\n        \"option_as_meta\": false,\n        \"button\": false,\n        \"toolbar\": {\n            \"title\": true\n        },\n        \"working_directory\": \"current_project_directory\"\n    },\n    \"project_panel\": {\n        \"button\": true,\n        \"default_width\": 240,\n        \"dock\": \"left\",\n        \"file_icons\": true,\n        \"folder_icons\": true,\n        \"git_status\": true,\n        \"indent_size\": 20,\n        \"auto_reveal_entries\": true,\n        \"auto_fold_dirs\": false,\n        \"scrollbar\": {\n            \"show\": \"auto\"\n        }\n    },\n    \"assistant\": {\n        \"default_model\": {\n            \"provider\": \"zed.dev\",\n            \"model\": \"claude-3-5-sonnet-20240620\"\n        },\n        \"enabled\": true,\n        \"button\": true,\n        \"dock\": \"right\",\n        \"default_width\": 640,\n        \"default_height\": 320,\n        \"provider\": \"zed.dev\",\n        \"version\": \"2\"\n    },\n    \"unnecessary_code_fade\": 0.9,\n    \"languages\": {\n        \"Python\": {\n            \"language_servers\": [\n                \"ruff\"\n            ],\n            \"format_on_save\": \"on\",\n            \"formatter\": [\n                {\n                    \"code_actions\": {\n                        \"source.organizeImports.ruff\": true,\n                        \"source.fixAll.ruff\": true\n                    }\n                },\n                {\n                    \"language_server\": {\n                        \"name\": \"ruff\"\n                    }\n                }\n            ]\n        }\n    },\n    \"file_types\": {\n        \"C++\": [\n            \"c\"\n        ],\n        \"TOML\": [\n            \"MyLockFile\"\n        ],\n        \"Dockerfile\": [\n            \"Dockerfile*\"\n        ],\n        \"Ansible\": [\n            \"**.ansible.yml\",\n            \"**/defaults/**.yml\",\n            \"**/defaults/**.yaml\",\n            \"**/meta/**.yml\",\n            \"**/meta/**.yaml\",\n            \"**/tasks/**.yml\",\n            \"**/tasks/*.yml\",\n            \"**/tasks/*.yaml\",\n            \"**/handlers/*.yml\",\n            \"**/handlers/*.yaml\",\n            \"**/group_vars/**.yml\",\n            \"**/group_vars/**.yaml\",\n            \"**playbook*.yaml\",\n            \"**playbook*.yml\"\n        ],\n        \"yaml\": [\n            \"yaml\",\n            \"yml\"\n        ]\n    },\n    \"lsp\": {\n        \"ruff\": {\n            \"initialization_options\": {\n                \"settings\": {\n                    // Ruff server settings goes here\n                    \"fixAll\": true,\n                    \"showSyntaxErrors\": true,\n                    \"organizeImports\": true,\n                    \"lineLength\": 88,\n                    \"lint\": {\n                        \"run\": \"onSave\",\n                        \"enabled\": true,\n                        \"select\": [\n                            \"E4\",\n                            \"E7\",\n                            \"E9\",\n                            \"F\",\n                            \"B\",\n                            \"Q\"\n                        ],\n                        \"extendSelect\": [\n                            \"W\"\n                        ],\n                        \"ignore\": [\n                            \"F841\"\n                        ]\n                    }\n                }\n            }\n        },\n        \"yaml-language-server\": {\n            \"settings\": {\n                \"yaml\": {\n                    \"keyOrdering\": false // Enforces alphabetical ordering of keys in maps\n                }\n            }\n        },\n        \"ansible-language-server\": {\n            \"settings\": {\n                \"ansible\": {\n                    \"path\": \"ansible\"\n                },\n                \"executionEnvironment\": {\n                    \"enabled\": false\n                },\n                \"python\": {\n                    \"interpreterPath\": \"python3\"\n                },\n                \"validation\": {\n                    \"enabled\": true,\n                    \"lint\": {\n                        \"enabled\": true,\n                        \"path\": \"ansible-lint\"\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nI want you to have a look at the ruff language server settings in the `lsp` section. \nI want you to suggest improvements, I want it to highlight unused variables and strict typecasting\n\nBased on your request to highlight unused variables and enforce strict typecasting, I can suggest the following improvements to your Ruff language server settings:\n\n1. To highlight unused variables, we need to ensure that the F841 rule (which detects unused variables) is not ignored. Remove it from the \"ignore\" list.\n\n2. To enforce strict typecasting, we can add some additional rules from Ruff's \"type-checking\" category.\n\nHere's an improved version of the Ruff settings:\n\n```json\n\"ruff\": {\n    \"initialization_options\": {\n        \"settings\": {\n            \"fixAll\": true,\n            \"showSyntaxErrors\": true,\n            \"organizeImports\": true,\n            \"lineLength\": 88,\n            \"lint\": {\n                \"run\": \"onSave\",\n                \"enabled\": true,\n                \"select\": [\n                    \"E4\",\n                    \"E7\",\n                    \"E9\",\n                    \"F\",\n                    \"B\",\n                    \"Q\",\n                    \"ANN\",  // Type annotation rules\n                    \"PYI\",  // .pyi file-related rules\n                    \"TCH\"   // Type-checking related rules\n                ],\n                \"extendSelect\": [\n                    \"W\"\n                ],\n                \"ignore\": []  // Removed F841 from here\n            }\n        }\n    }\n}\n```\n\nThese changes will:\n\n1. Highlight unused variables (F841 is now included in the checks).\n2. Enforce strict typecasting by including the ANN (type annotation), PYI (.pyi file-related), and TCH (type-checking) rule sets.\n\nYou might also want to consider adding these settings:\n\n```json\n\"typeCheckingMode\": \"strict\",\n\"preview\": true\n```\n\nThese additional settings will:\n\n- Enable strict type checking mode.\n- Enable preview features, which might include newer type-checking capabilities.\n\nRemember that strict type checking might generate a lot of warnings in existing code, so you may need to gradually address these issues or selectively ignore some rules if they're too restrictive for your current codebase.\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":143}}},{"id":{"replica_id":0,"value":20},"start":7018,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":144}}},{"id":{"replica_id":0,"value":61},"start":7118,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":145}}},{"id":{"replica_id":0,"value":62},"start":9133,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":146}}}],"summary":"Enhancing Ruff Language Server Settings for Python","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null},{"range":{"start":2,"end":6931},"icon":"File","label":"~/.config/zed/settings.json","metadata":{"path":"~/.config/zed/settings.json"}}]}